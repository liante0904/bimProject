<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.bridgeimpact.renewal.emailAuthSQL">
   	<resultMap type="emailAuthVO"  id="EmailAuthResultMap">
    		<result property="idx" column="IDX" />
		<result property="userId" column="USER_ID" />
		<result property="userIdx" column="USER_IDX" />
		<result property="emailAuthKey" column="EMAIL_AUTH_KEY" />
		<result property="authFl" column="AUTH_FL" />
	</resultMap>

   	<insert id="insertEmailAuth" parameterType="emailAuthVO">
		INSERT INTO BIM_EMAIL_AUTH
		(
		IDX,
		USER_IDX,
		USER_ID,
		EMAIL_AUTH_KEY,
		AUTH_FL
		)
		VALUES
		(
		NULL,
		#{userIdx},
		#{userId},
		#{emailAuthKey},
		'N'
		)
	</insert>

	<update id="updateEmail">
		UPDATE BIM_EMAIL_AUTH
		SET
		AUTH_FL = 'Y'
		WHERE
		USER_ID = #{userId }
		AND 
		EMAIL_AUTH_KEY = #{emailAuthKey }
	</update>
</mapper>
